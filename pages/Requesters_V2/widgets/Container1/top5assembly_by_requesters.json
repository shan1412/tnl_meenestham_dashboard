{
  "accentColor": "{{appsmith.theme.colors.primaryColor}}",
  "alignment": "start",
  "allowScroll": false,
  "animateLoading": false,
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "bottomRow": 118.59999999999984,
  "boxShadow": "{{appsmith.theme.boxShadow.appBoxShadow}}",
  "chartData": {
    "5zz1dwyawa": {
      "data": [
        {
          "x": "Product1",
          "y": 20000
        },
        {
          "x": "Product2",
          "y": 22000
        },
        {
          "x": "Product3",
          "y": 32000
        }
      ],
      "seriesName": "2023"
    }
  },
  "chartName": "Sales Report",
  "chartType": "CUSTOM_ECHART",
  "customEChartConfig": "{{ ((chartType) => ( \n  (() => {\n    // Retrieve selected filter values\n    const { selectedAssemblyConstituencyName, chart_color_palette } = requestor_utils.getFilters();\n\n    // Filter the dataset based on selected filters\n    const filteredData = requestor_utils.filterDataPoints({\n      data: requestordataset_dev.data,\n      filterTypes: '*',\n      excludeTypes: ['ByAC']\n    });\n\n    // Aggregate data by constituency and count requesters\n    const aggregatedData = filteredData\n      .filter(req => req.constituency_name !== null &&\n                     req.constituency_name !== 'NA' &&\n                     req.constituency_name !== 'None')\n      .reduce((acc, req) => {\n        const constituencyName = req.constituency_name;\n        acc[constituencyName] = (acc[constituencyName] || 0) + 1; // Correct increment logic\n        return acc;\n      }, {});\n\n    // Convert the aggregated data into an array and sort by requester count\n    const sortedData = Object.entries(aggregatedData)\n      .map(([constituency_name, count]) => ({ constituency_name, count }))\n      .sort((a, b) => b.count - a.count) // Sort by count descending\n      .slice(0, 5) // Take the top 5 constituencies\n      .sort((a, b) => a.count - b.count); // Sort the top 5 by count ascending for yAxis\n\n    // Prepare data for the chart\n    const data = sortedData.map(item => ({\n      constituency_name: item.constituency_name,\n      count: item.count,\n      color: item.constituency_name === selectedAssemblyConstituencyName ? chart_color_palette.secondarylight : chart_color_palette.secondarylight // Differentiate colors based on selection\n    }));\n\n    return {\n      title: {\n        text: 'Top 5 Assembly Constituencies by Requestor Activity',\n        left: 'center',\n        top: 'top',\n        textStyle: {\n          fontSize: 18,\n          fontWeight: 'bold'\n        }\n      },\n      grid: {\n        left: '20%',\n        right: '10%',\n        top: '10%',\n        bottom: '15%'\n      },\n      xAxis: {\n        type: 'value' // X-axis represents values for a horizontal bar chart\n      },\n      yAxis: {\n        type: 'category', // Y-axis represents categories (constituency names)\n        data: data.map(item => item.constituency_name), // Set categories (constituency names)\n        axisLabel: {\n          formatter: function(value) {\n            const maxLength = 20; // Number of characters per line\n            const words = value.split(' '); // Split by spaces\n            let line = '';\n            let result = '';\n\n            for (const word of words) {\n              if ((line + word).length > maxLength) {\n                result += line.trim() + '\\n'; // Add line break\n                line = word; // Start a new line\n              } else {\n                line += (line.length === 0 ? '' : ' ') + word; // Add word to current line\n              }\n            }\n            result += line.trim(); // Add the last line\n            return result;\n          }\n        }\n      },\n      series: [\n        {\n          type: 'bar', // Bar chart type\n          data: data.map(item => ({\n            value: item.count, // X-axis value for horizontal bar chart\n            itemStyle: {\n              color: item.color,\n              opacity: selectedAssemblyConstituencyName && selectedAssemblyConstituencyName !== item.constituency_name ? 0.2 : 1 // Highlight if selected\n            }\n          })),\n          label: {\n            show: true,\n            position: 'right',\n            formatter: '{c}', // Display the value\n            fontSize: 12 // Show labels on the right side of the bars\n          }\n        }\n      ],\n      tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n          type: 'shadow'\n        }\n      }\n    };\n  })()\n))(top5assembly_by_requesters.chartType) }}",
  "customFusionChartConfig": {
    "dataSource": {
      "chart": {
        "alignCaptionWithCanvas": 1,
        "canvasPadding": "0",
        "caption": "Sales Report",
        "captionAlignment": "center",
        "captionFontColor": "#231F20",
        "captionFontSize": "24",
        "captionPadding": "20",
        "chartBottomMargin": "10",
        "chartLeftMargin": "20",
        "chartRightMargin": "40",
        "chartTopMargin": "10",
        "labelFontColor": "#716e6e",
        "labelFontSize": "12",
        "legendIconAlpha": "100",
        "legendIconBgAlpha": "100",
        "legendIconSides": "4",
        "legendPosition": "top",
        "theme": "fusion",
        "xAxisName": "Product Line",
        "xAxisNameFontColor": "#716e6e",
        "xAxisNameFontSize": "14",
        "yAxisName": "Revenue($)",
        "yAxisNameFontColor": "#716e6e",
        "yAxisNameFontSize": "14",
        "yAxisValueFontColor": "#716e6e",
        "yAxisValueFontSize": "12"
      },
      "data": [
        {
          "label": "Product1",
          "value": 20000
        },
        {
          "label": "Product2",
          "value": 22000
        },
        {
          "label": "Product3",
          "value": 32000
        }
      ]
    },
    "type": "column2d"
  },
  "displayName": "Chart",
  "dynamicBindingPathList": [
    {
      "key": "borderRadius"
    },
    {
      "key": "boxShadow"
    },
    {
      "key": "accentColor"
    },
    {
      "key": "fontFamily"
    },
    {
      "key": "customEChartConfig"
    }
  ],
  "dynamicTriggerPathList": [
    {
      "key": "onDataPointClick"
    }
  ],
  "flexVerticalAlignment": "start",
  "fontFamily": "{{appsmith.theme.fontFamily.appFont}}",
  "hideCard": false,
  "iconSVG": "/static/media/icon.8eea39845729f7f4bfadeecd3810a09d.svg",
  "isDeprecated": false,
  "isLoading": false,
  "isVisible": true,
  "key": "ed4zix1hrb",
  "labelOrientation": "auto",
  "leftColumn": 0,
  "minWidth": 450,
  "mobileBottomRow": 257.4000000000005,
  "mobileLeftColumn": 0,
  "mobileRightColumn": 64,
  "mobileTopRow": 225.4000000000005,
  "onDataPointClick": "{{Assembly_constituency.myFun1();\ntotal_data_counts.myFun1();}}",
  "parentColumnSpace": 11.890625,
  "parentId": "zjg87kjyes",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "responsiveBehavior": "fill",
  "rightColumn": 32,
  "searchTags": [
    "graph",
    "visuals",
    "visualisations"
  ],
  "showDataPointLabel": false,
  "tags": [
    "Display"
  ],
  "topRow": 86.59999999999985,
  "type": "CHART_WIDGET",
  "version": 1,
  "widgetId": "5ohpe9mhyc",
  "widgetName": "top5assembly_by_requesters",
  "xAxisName": "Product Line",
  "yAxisName": "Revenue($)"
}